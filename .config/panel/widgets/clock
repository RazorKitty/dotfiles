#!/bin/sh

PREFIX="%{F$WHITE}%{B$BLACK}%{O$PADDING}"
SUFFIX="%{O$PADDING}%{F-}%{B-}"

while true; do
    echo "C$PREFIX$(date +'%H:%M %a %d/%m/%y')$SUFFIX" >> "$1";
    # a little computationally expensive
    # but it keeps us in sync with the real world
    sleep "$(expr 60 - $(date +%S))";
done
